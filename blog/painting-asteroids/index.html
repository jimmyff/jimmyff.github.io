<!doctype html><html prefix="og: https://ogp.me/ns#" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="Fun loving creative (he/him) 🏳️‍🌈" name=description><meta content="jimmy, forrester-fellowes, jimmyff, jimmy3ds, yorkshire, leeds, developer" name=keywords><title>
  Painting asteroids // jimmyff // a creative & geeky personal blog</title><meta content="jimmyff | Painting asteroids" property=og:title><meta content=website property=og:type><meta content=https://www.jimmyff.co.uk/blog/painting-asteroids/ property=og:url><meta content="Fun loving creative (he/him) 🏳️‍🌈" property=og:description><meta content="
    https://www.jimmyff.co.uk/processed_images/open_graph_image.8860f7e50aef5ee1.webp
    
" property=og:image><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><link href=https://www.jimmyff.co.uk/atom.xml rel=alternate title=jimmyff type=application/rss+xml><link href=https://www.jimmyff.co.uk/base.css rel=stylesheet><body><header><div class=top><div class=avatar><a href=/> <img srcset="https://www.jimmyff.co.uk/processed_images/avatar_2024.9057fd955d2bd1d0.webp 64w, https://www.jimmyff.co.uk/processed_images/avatar_2024.b566c519a68e1b72.webp 128w, https://www.jimmyff.co.uk/processed_images/avatar_2024.73049685b9748c65.webp 256w" alt=jimmyff src=https://www.jimmyff.co.uk/processed_images/avatar_2024.b566c519a68e1b72.webp title=jimmyff> </a></div><div class=details><a class=site-name href=/> <h1>jimmyff</h1> </a><div class=site-description><p>Fun loving creative (he/him) 🏳️‍🌈</div></div><div class=right-button><a alt=Search href=https://www.jimmyff.co.uk/search/> 🔎 </a></div></div><nav><div class=links><a href="https://www.jimmyff.co.uk/blog/ " alt=Blog><span class=emoji>📖</span><span class=name>Blog</span></a><a href="https://www.jimmyff.co.uk/gallery/ " alt=Gallery><span class=emoji>🎨</span><span class=name>Gallery</span></a><a href="https://www.jimmyff.co.uk/projects/ " alt=Projects><span class=emoji>💡</span><span class=name>Projects</span></a><a href="https://www.jimmyff.co.uk/games/ " alt=Games><span class=emoji>🎲</span><span class=name>Games</span></a><details class="overflow-menu dropdown dropdown-right" alt=Menu><summary><div></div> <div></div> <div></div></summary> <ul><li><a href="https://www.jimmyff.co.uk/ " alt=Home><span class=emoji>🏠</span><span class=name>Home</span></a><li><a href="https://www.jimmyff.co.uk/guestbook/ " alt=Guestbook><span class=emoji>🌍</span><span class=name>Guestbook</span></a><li><a href="https://www.jimmyff.co.uk/apps/ " alt=Apps><span class=emoji>📱</span><span class=name>Apps</span></a><li><a href="https://www.jimmyff.co.uk/inktober/ " alt=Inktober><span class=emoji>🎨</span><span class=name>Inktober</span></a><li><a alt="Contact me" href="https://docs.google.com/forms/d/e/1FAIpQLScIN2i8tudYfvWZO96Ed-_ma011PgZU-CrxRyCXdSA1z9NRjA/viewform "><span class=emoji>📧</span><span class=name>Contact me</span></a></ul></details></div></nav></header><article><section class=post><div class=post-header><div class=meta><div class=date><span class=day>16</span><span class=rest>Jul 21</span></div></div><div class=matter><h1 class=title>Painting asteroids</h1></div></div><p><em> Part of the <a href=https://www.jimmyff.co.uk/projects/playdate/>👾 Playdate</a> project. </em><article><p>I've been stewing on how I could fill the asteroids to make my <a href=/tags/space_game/>space game</a> look better. It's a tricky problem as I only know terrain lines and nothing else (so I don't know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:</p><img alt="The problem" srcset="https://www.jimmyff.co.uk/processed_images/problem.1beb76523c90954c.webp 512w, https://www.jimmyff.co.uk/processed_images/problem.8615b62d5641fa12.webp 1024w" title="The problem" src=https://www.jimmyff.co.uk/processed_images/problem.8615b62d5641fa12.webp><p>I can trust that the space ship will always be in space (even if it's hit an asteroid, it should never actually be in the asteroid!). Using that piece of truth I've came up with an idea, if I projected from the ship to the corners and count the terrain line intersections I should be able to figure out what's solid. If the number of intersections is even, I know the corner should be in also in space, if the intersection count was odd, then the corner is in an asteroid.</p><img alt="Possible solution" srcset="https://www.jimmyff.co.uk/processed_images/possible_solution.7d6e6e8112421bda.webp 512w, https://www.jimmyff.co.uk/processed_images/possible_solution.dd7bc1f63e5ce0b6.webp 1024w" title="Possible solution" src=https://www.jimmyff.co.uk/processed_images/possible_solution.dd7bc1f63e5ce0b6.webp><p>Once I knew if the corners were in an asteroid or not, I should then be able to move along each edge and join up the lines.<h2 id=implementation>Implementation</h2><img alt="Implementing the intersection counting" title="Implementing the intersection counting" class=small src=https://www.jimmyff.co.uk/blog/painting-asteroids/1-corners.gif><p>I've implemented the intersection counting, if the line is green then there is an even number of intersections which means the corner is in space, if red then there is an odd number of intersections so this is in the asteroid.<p>I've cut the terrain line at the scren edge (and highlighting it with a circle), this is so I can make a nice clean edge on each polygon.<p>(Oh you might also notice I've implemented asteroid rotation too!)</p><img alt=Triangulation! class=small src=https://www.jimmyff.co.uk/blog/painting-asteroids/2-triangulate.gif title=Triangulation!><p>Here I have implemented the algorithm that combines all the edges in to polygons. At the top there is text that says something like 'P: 2', this means 2 polygons found.<p>At first I was getting a weird graphical glitch when filling my polygons which I realised was due to the fact my polygons are concave. Filling concave polygons turns out is a technically tricky as the polygon needed triangulating (chopping in to simple triangles). Luckily Love2d has a triangulate feature that I could use. I coloured the triangles random colours to highlight the triangulation process.</p><img alt="It worked!" title="It worked!" class=small src=https://www.jimmyff.co.uk/blog/painting-asteroids/3-done.gif><p>...ta-dah! Here is the finished product. I'm super happy (& surprised) that my crazy idea worked!<p>I now need to reimplement the ship, but I'm a little hesitant to continue with Lua due to it being so difficult to debug (and I'm really missing static-typing!). I'm thinking about switching to C or possibly Rust to continue my playdate journey.<p>I apologise for the noisy strangely coloured gif's -I really need to level up by gif skills!</article><ul class=tags><li><a href=https://www.jimmyff.co.uk/tags/coding>coding</a><li><a href=https://www.jimmyff.co.uk/tags/gamedev-digital>gamedev-digital</a><li><a href=https://www.jimmyff.co.uk/tags/lang-lua>lang-lua</a></ul></section></article><footer><div class=social><ul><li><a href=https://github.com/jimmyff rel=me title=Github><i data-feather=github></i></a><li><a href=https://www.youtube.com/@jimmyff-uk rel=me title=YouTube><i data-feather=youtube></i></a><li><a href=https://bsky.app/profile/faehound.games rel=me title=Bluesky><i data-feather=message-square></i></a><li><a href=https://www.instagram.com/jimmyff_art/jimmyff_art rel=me title=Medium><i data-feather=instagram></i></a><li><a href=https://medium.com/@jimmyff rel=me title=Medium><i data-feather=file-text></i></a><li><a href=https://www.jimmyff.co.uk/atom.xml title=jimmyff><i data-feather=rss></i></a></ul></div><p>© jimmyff 2025 <br>Powered by <a href=https://getzola.org/ target=_blank>Zola</a>. Theme: <a href=https://github.com/jimmyff/zola-inky target=_blank>Inky</a>.</footer><script>feather.replace()</script><script src="https://www.googletagmanager.com/gtag/js?id=G-71ZN1D4H6Q" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-71ZN1D4H6Q`)</script><script async src=/js/drop.js></script><script integrity="sha512-7x3zila4t2qNycrtZ31HO0NnJr8kg2VI67YLoRSyi9hGhRN66FHYWr7Axa9Y1J9tGYHVBPqIjSE1ogHrJTz51g==" async crossorigin src=https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.28.0/feather.min.js></script>