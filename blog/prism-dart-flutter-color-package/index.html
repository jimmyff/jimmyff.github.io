<!doctype html><html prefix="og: https://ogp.me/ns#" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="Fun loving creative (he/him) 🏳️‍🌈" name=description><meta content="jimmy, forrester-fellowes, jimmyff, jimmy3ds, yorkshire, leeds, developer" name=keywords><title>
  Prism: Color Library for Dart & Flutter // jimmyff // a creative & geeky personal blog</title><meta content="jimmyff | Prism: Color Library for Dart & Flutter" property=og:title><meta content=website property=og:type><meta content=https://www.jimmyff.co.uk/blog/prism-dart-flutter-color-package/ property=og:url><meta content="Fun loving creative (he/him) 🏳️‍🌈" property=og:description><meta content="
    https://www.jimmyff.co.uk/processed_images/open_graph_image.8860f7e50aef5ee1.webp
    
" property=og:image><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><link href=https://www.jimmyff.co.uk/atom.xml rel=alternate title=jimmyff type=application/rss+xml><link href=https://www.jimmyff.co.uk/base.css rel=stylesheet><body><header><div class=top><div class=avatar><a href=/> <img srcset="https://www.jimmyff.co.uk/processed_images/avatar_2024.9057fd955d2bd1d0.webp 64w, https://www.jimmyff.co.uk/processed_images/avatar_2024.b566c519a68e1b72.webp 128w, https://www.jimmyff.co.uk/processed_images/avatar_2024.73049685b9748c65.webp 256w" alt=jimmyff src=https://www.jimmyff.co.uk/processed_images/avatar_2024.b566c519a68e1b72.webp title=jimmyff> </a></div><div class=details><a class=site-name href=/> <h1>jimmyff</h1> </a><div class=site-description><p>Fun loving creative (he/him) 🏳️‍🌈</div></div><div class=right-button><a alt=Search href=https://www.jimmyff.co.uk/search/> 🔎 </a></div></div><nav><div class=links><a href="https://www.jimmyff.co.uk/blog/ " alt=Blog><span class=emoji>📖</span><span class=name>Blog</span></a><a href="https://www.jimmyff.co.uk/gallery/ " alt=Gallery><span class=emoji>🎨</span><span class=name>Gallery</span></a><a href="https://www.jimmyff.co.uk/projects/ " alt=Projects><span class=emoji>💡</span><span class=name>Projects</span></a><a href="https://www.jimmyff.co.uk/games/ " alt=Games><span class=emoji>🎲</span><span class=name>Games</span></a><details class="overflow-menu dropdown dropdown-right" alt=Menu><summary><div></div> <div></div> <div></div></summary> <ul><li><a href="https://www.jimmyff.co.uk/ " alt=Home><span class=emoji>🏠</span><span class=name>Home</span></a><li><a href="https://www.jimmyff.co.uk/guestbook/ " alt=Guestbook><span class=emoji>🌍</span><span class=name>Guestbook</span></a><li><a href="https://www.jimmyff.co.uk/apps/ " alt=Apps><span class=emoji>📱</span><span class=name>Apps</span></a><li><a href="https://www.jimmyff.co.uk/inktober/ " alt=Inktober><span class=emoji>🎨</span><span class=name>Inktober</span></a><li><a alt="Contact me" href="https://docs.google.com/forms/d/e/1FAIpQLScIN2i8tudYfvWZO96Ed-_ma011PgZU-CrxRyCXdSA1z9NRjA/viewform "><span class=emoji>📧</span><span class=name>Contact me</span></a></ul></details></div></nav></header><article><section class=post><div class=post-header><div class=meta><div class=date><span class=day>01</span><span class=rest>Aug 25</span></div></div><div class=matter><h1 class=title>Prism: Color Library for Dart & Flutter</h1></div></div><article><blockquote><p>Prism is an optimized, zero-dependency color manipulation library for Dart & Flutter with multiple color models, accessibility tools, and pre-built palettes.</blockquote><p>I've always been fascinated with colors and color theory. I've designed a board game and an app around it, and in my amateur artworks I seem to subconsciously gravitate to complementary palettes (<em>examples: <a href=/gallery/glass-containers/>1</a>, <a href=/gallery/hearts/>2</a>, <a href=/gallery/museum-sektching/>3</a></em>). Over the years I've written a couple of unpublished color libraries. The first was Chroma which I later replaced with Pigment, which I rebranded as Prism due to a name clash. The rebrand gave me a good excuse to spend a bit of time refactoring it and polishing it. I'm pleased to announce Prism is now available over on <a href=https://pub.dev/packages/prism>pub.dev</a> and <a href=https://github.com/jimmyff/prism>github</a>. While the concepts aren't new, Prism is a comprehensive and thoughtfully designed package that makes working with modern color spaces in Dart really easy.</p><img alt="Color Theory in practice" srcset="https://www.jimmyff.co.uk/processed_images/tablet_screen.9812ef092216936d.webp 512w, https://www.jimmyff.co.uk/processed_images/tablet_screen.a539dc774ed3e666.webp 1024w" title="Color Theory in practice" src=https://www.jimmyff.co.uk/processed_images/tablet_screen.a539dc774ed3e666.webp><blockquote><p>✨ Back in 2015 I spotted this orange and blue banding on my tablet's screen providing a little real-world demonstration of the color theory that I was reading about! 🧡💙</blockquote><hr><p>To understand what makes prism useful I need to briefly explain color spaces. These are systems for describing and storing colors:<h3 id=rgb-the-color-model-of-screens>RGB - The Color Model of Screens</h3><p>Your phone or laptop screen creates colors by mixing light. Each pixel is made of tiny red, green, and blue sub-pixels (RGB). If all are off, you get black; if all are on full, you get white. This is great for screens, but it's not very intuitive for humans.<p>If you want to make a color lighter or change its hue, you're just fiddling with Red, Green, and Blue values. Worse, if you try to create a gradient between two colors in RGB, you often get a muddy, greyish color in the middle. This is because the math of RGB doesn't match up with how our eyes actually perceive color and lightness.<p>Color spaces like HSL and HSV were created to make manipulating RGB colors easier. However, they are fundamentally flawed, as their handling of lightness and value is inconsistent across different hues.<h3 id=oklab-oklch-a-more-human-approach>Oklab + Oklch - A More Human Approach</h3><p>This is the problem Oklab and Oklch are designed to solve. They are modern color spaces built around how humans perceive color, focusing on three things:<ul><li><strong>L</strong> - Lightness (how light or dark it appears)<li><strong>C</strong> - Chroma (how vibrant or intense the color is)<li><strong>H</strong> - Hue (the actual color, like red, green, blue)</ul><p>The magic is that "Lightness" in Oklch is perceptually uniform. This means you can change the hue or chroma and the perceived lightness won't change. This is a game-changer for creating accessible UIs with proper contrast, and for creating beautiful, vibrant gradients that don't turn to mud.<p>While the math behind this is complex (I used the brilliant formulas from <a href=https://bottosson.github.io/posts/gamutclipping/>Björn Ottosson's post</a> to handle gamut clipping), but Prism abstracts all that away.<hr><p>Hopefully the above gives you a little overview of why a dedicated color library is useful. Prism provides a really easy way to create, manipulate and store colors. Prism currently supports Rgb8, Rgb16, Hsl, Hsv, Oklch and Oklab color spaces, and makes it trivial to convert between them. Here's a little example:<pre class=language-dart data-lang=dart style=color:#c0c5ce;background-color:#2b303b><code class=language-dart data-lang=dart><span style=color:#65737e>// Create an rgb color from hex and convert to oklch
</span><span style=color:#b48ead>final</span><span> red = </span><span style=color:#ebcb8b>RayRgb8</span><span>.</span><span style=color:#8fa1b3>fromHex</span><span>(</span><span style=color:#a3be8c>'#FF0000'</span><span>);
</span><span style=color:#b48ead>final</span><span> redInOklch = red.</span><span style=color:#8fa1b3>toOklch</span><span>();
</span><span style=color:#8fa1b3>print</span><span>(redInOklch); 
</span><span style=color:#65737e>// RayOklch(l: 0.628, c: 0.258, h: 29.2°)
</span><span>
</span><span style=color:#65737e>// A darker red (with perceptually uniform lightness)
</span><span style=color:#b48ead>final</span><span> darkRed = redInOklch.</span><span style=color:#8fa1b3>withLightness</span><span>(</span><span style=color:#d08770>0.3</span><span>);
</span><span style=color:#8fa1b3>print</span><span>(darkRed);
</span><span style=color:#65737e>// RayOklch(l: 0.300, c: 0.089, h: 29.2°)
</span><span>
</span><span style=color:#65737e>// let's take it back to rgb to print the hex
</span><span style=color:#b48ead>final</span><span> darkRedInRgb = darkRed.</span><span style=color:#8fa1b3>toRgb8</span><span>();
</span><span style=color:#8fa1b3>print</span><span>(darkRedInRgb.</span><span style=color:#8fa1b3>toHexStr</span><span>());
</span><span style=color:#65737e>// #521711
</span></code></pre><p><em>Notice that the final rgb hex color (format: #RRGGBB) actually has a bit of green and blue to create the darker red.</em><h2 id=palettes>Palettes</h2><p>Prism also has a palette system, this allows developers to have palettes with pre-calculated luminosity levels with RGB or OKLCH colors (this is particularly useful when working with RGB palettes as runtime calculations can be expensive). The palette sources can be pre-defined such as Material Colors, Open Colors, Tailwind or can be pre-computed using Prism (the Prism palette is called Spectrum). Spectrum builds on the Google's Material Colors system (which offers shades from 50-900 in multiple colors) but expands it at both ends to offer shades from 0-1000 giving more choice at the extremes of the spectrum, great for doing really light/dark themes. I've also expanded the color choices with hues at 15° intervals around the color wheel. The result is a palette with more nuance at the lightest and darkest extremes, as you can see in the comparison below:<p><img alt="Spectrum RGB palette" src=https://www.jimmyff.co.uk/blog/prism-dart-flutter-color-package/Spectrum.png><p><img alt="Material RGB palette" src=https://www.jimmyff.co.uk/blog/prism-dart-flutter-color-package/Material.png><p><em>As a little bonus all the palettes are compiled to <a href=https://github.com/jimmyff/prism/tree/main/palette_gallery/>css and available on github</a> in both RGB and OKLCH formats.</em><h2 id=what-s-next>What's next</h2><p>I've not finished porting over the Pigment library to Prism, there is still the color theory code to migrate. I use color theory to calculate palettes based on images by extracting the dominant colors and choosing aesthetically pleasing combinations of colors. Before I port this over I need to consider my approach as at the moment prism and prism_flutter require zero dependencies and i'd like to keep them that way. I'll probably add a prism_image_analysis package at some point which will have the <a href=https://pub.dev/packages/image>package:image</a> package dependency.<hr><p>You can find Prism on <a href=https://pub.dev/packages/prism>pub.dev</a> and <a href=https://github.com/jimmyff/prism>github</a>. Prism Flutter is also available on <a href=https://pub.dev/packages/prism_flutter>pub.dev</a> and <a href=https://github.com/jimmyff/prism_flutter>github</a>.</article><ul class=tags><li><a href=https://www.jimmyff.co.uk/tags/lang-dart>lang-dart</a><li><a href=https://www.jimmyff.co.uk/tags/coding>coding</a><li><a href=https://www.jimmyff.co.uk/tags/flutter>flutter</a></ul></section></article><footer><div class=social><ul><li><a href=https://github.com/jimmyff rel=me title=Github><i data-feather=github></i></a><li><a href=https://www.youtube.com/@jimmyff-uk rel=me title=YouTube><i data-feather=youtube></i></a><li><a href=https://bsky.app/profile/faehound.games rel=me title=Bluesky><i data-feather=message-square></i></a><li><a href=https://www.instagram.com/jimmyff_art/jimmyff_art rel=me title=Medium><i data-feather=instagram></i></a><li><a href=https://medium.com/@jimmyff rel=me title=Medium><i data-feather=file-text></i></a><li><a href=https://www.jimmyff.co.uk/atom.xml title=jimmyff><i data-feather=rss></i></a></ul></div><p>© jimmyff 2025 <br>Powered by <a href=https://getzola.org/ target=_blank>Zola</a>. Theme: <a href=https://github.com/jimmyff/zola-inky target=_blank>Inky</a>.</footer><script>feather.replace()</script><script src="https://www.googletagmanager.com/gtag/js?id=G-71ZN1D4H6Q" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-71ZN1D4H6Q`)</script><script async src=/js/drop.js></script><script integrity="sha512-7x3zila4t2qNycrtZ31HO0NnJr8kg2VI67YLoRSyi9hGhRN66FHYWr7Axa9Y1J9tGYHVBPqIjSE1ogHrJTz51g==" async crossorigin src=https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.28.0/feather.min.js></script>